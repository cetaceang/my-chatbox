# ==================================================
# == Docker 环境专属的环境变量模板 ==
# ==================================================
#
# 请将此文件复制为 .env.docker 文件，并填入你自己的值。
# docker-compose.yml 已被配置为读取此文件。
# 这份配置专为生产环境设计。

# Django 的安全密钥，请务必修改为一个长而随机的字符串！
# 你可以使用 `python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'` 来生成一个新的。
SECRET_KEY=your_secret_key_for_docker_production

# 在生产环境中，DEBUG 必须为 False！
DEBUG=False

# 允许访问的主机，用逗号分隔。
# 使用 '*' 允许所有主机访问，但在生产环境中建议指定你的域名。
# 例如: ALLOWED_HOSTS=your-domain.com,www.your-domain.com
ALLOWED_HOSTS=*

# HTTPS 代理设置 (如果你的应用运行在处理 HTTPS 的反向代理之后，请设置为 True)
ENABLE_HTTPS_PROXY_SETTINGS=False

# CSRF 受信任的来源，用逗号分隔。
# 这是为了防止跨站请求伪造攻击，请务必设置为你的前端域名。
# 例如: CSRF_TRUSTED_ORIGINS=https://your-domain.com
CSRF_TRUSTED_ORIGINS=

# 数据库文件在容器内的路径
DATABASE_PATH=/app/data/db.sqlite3

# Django 项目设置模块
DJANGO_SETTINGS_MODULE=config.settings

# ==================================================
# == Redis & Cache Settings ==
# ==================================================
#
# 用于 Channels 和缓存的 Redis 服务器配置
REDIS_HOST=redis
REDIS_PORT=6379
# 用于 Django Channels 的 Redis 数据库编号 (处理实时消息)
REDIS_DB_CHANNELS=1
# 用于 Django 缓存的 Redis 数据库编号 (建议与 Channels 分开)
REDIS_DB_CACHE=2

# 缓存后端类型
# 可选值:
# - "redis": 使用 Redis 作为缓存 (生产环境推荐)
# - "memory": 使用本地内存缓存 (仅限单进程开发环境)
CACHE_TYPE=redis

# ==================================================
# == 图片上下文策略设置 ==
# ==================================================
#
# 控制在发送给AI的请求中包含多少历史图片。
#
# 可选值:
# - "all":         包含所有历史图片（占用最多上下文空间）。
# - "latest_only": 只包含最新的几张图片（默认值，推荐）。
# - "none":        不包含任何图片内容，只发送图片描述文本。
IMAGE_CONTEXT_STRATEGY=latest_only

# 当策略为 "latest_only" 时，要包含的最新图片数量。
# 默认为 1。
MAX_IMAGES_IN_CONTEXT=1
